# ppc/i386 Universal Build mozconfig

# As used here, arguments in $MOZ_BUILD_PROJECTS are suitable as arguments
# to gcc's -arch parameter.
mk_add_options MOZ_BUILD_PROJECTS="ppc i386"

if test -e "$topsrcdir/mozilla/build/macosx/universal/mozconfig.common"; then
. $topsrcdir/mozilla/build/macosx/universal/mozconfig.common
else
. $topsrcdir/build/macosx/universal/mozconfig.common
fi

# Needed to enable breakpad in application.ini
export MOZILLA_OFFICIAL=1

export CFLAGS="-gdwarf-2 -W -Wno-unused-parameter -Wno-sign-compare"
export CXXFLAGS="-gdwarf-2 -W -Wno-unused-parameter -Wno-missing-field-initializers"

# For NSS symbols
export MOZ_DEBUG_SYMBOLS=1

# Enable parallel compiling
mk_add_options MOZ_MAKE_FLAGS="-j4"
mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/../obj-instantbird

ac_add_options --enable-application=instantbird
ac_add_options --enable-update-channel=release
ac_add_options --enable-update-packaging
ac_add_options --enable-optimize
ac_add_options --disable-debug
ac_add_options --disable-tests
ac_add_options --enable-official-branding
ac_add_options --with-l10n-base=..
